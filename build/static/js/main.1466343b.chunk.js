(window.webpackJsonpblog=window.webpackJsonpblog||[]).push([[0],{43:function(e,t,a){},52:function(e,t,a){e.exports=a(85)},80:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),i=a(16),o=a(21),l=a(46),u=a(14),m=a(17),d=a(3),h=a(4),p=a(6),f=a(5),v=a(7),b=a(8),g=a.n(b),E=a(10),y=a(47),N=a.n(y).a.create({baseURL:"https://thiele.work/api/v1"}),O=function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("/titles/".concat(e||""));case 2:n=t.sent,a({type:"FETCH_TITLES",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},k=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).helperUrl=function(e){return"/articles/".concat(e)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTitles()}},{key:"renderList",value:function(){return this.props.titles.map(function(e){return r.a.createElement("div",{className:"item",key:e.id},r.a.createElement("i",{className:"large angle double right icon"}),r.a.createElement("div",{className:"content"},r.a.createElement(u.b,{to:"/articles/".concat(e.id),className:"header"},e.title),r.a.createElement("div",{className:"description"},e.created_at)))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui relaxed divided list"},this.renderList())}}]),t}(r.a.Component),j=Object(m.f)(Object(i.b)(function(e){return{titles:e.titles}},{fetchTitles:O})(k)),w=(a(43),a(19)),S=a.n(w),C=a(22),T=a.n(C),x=a(49),P=(a(80),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",body:"",errors:{name:"",body:"",Nocheck_n:!0,Nocheck_b:!0}},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,c=a.state.errors;switch(n){case"name":c.name=r.length<1?"\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff01":"",c.Nocheck_n=!1;break;case"body":c.body=r.length>=1&&r.length<=200?"":"\u30b3\u30e1\u30f3\u30c8\u306f1\u6587\u5b57\u4ee5\u4e0a200\u6587\u5b57\u4ee5\u5185\u3068\u3057\u3066\u304f\u3060\u3055\u3044\uff01",c.Nocheck_b=!1}a.setState(Object(x.a)({errors:c},n,r),function(){console.log(c)})},a.onFormSubmit=function(e){N.post("/comments/",{article:a.props.articleId,name:a.state.name,body:a.state.body}),a.setState({name:"",body:""}),window.location.reload()},a.buttonPressSubmit=function(e){e.preventDefault();var t=a.state.errors;t.name.length>0||t.body.length>0||t.Nocheck_n||t.Nocheck_b||a.onFormSubmit()},a.checkSubmit=function(){var e=a.state.errors;if(e.name.length>0||e.body.length>0||e.Nocheck_n||e.Nocheck_b)return{opacity:.3,cursor:"default"}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("form",{className:"ui reply form",onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{name:"name",type:"text",value:this.state.name,onChange:this.handleChange}),e.name.length>0&&r.a.createElement("span",{className:"error"},e.name)),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Body"),r.a.createElement("textarea",{name:"body",value:this.state.body,onChange:this.handleChange}),e.body.length>0&&r.a.createElement("span",{className:"error"},e.body),r.a.createElement("div",{className:"count"},this.state.body.length,"/200")),r.a.createElement("div",{className:"ui primary submit labeled icon button",onClick:this.buttonPressSubmit,style:this.checkSubmit()},r.a.createElement("i",{className:"icon edit"})," Add Comment"))}}]),t}(r.a.Component)),_=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[]},a.getComments=function(){var e=Object(E.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/comments/?article_id=".concat(t));case 2:n=e.sent,a.setState({comments:n.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getComments(this.props.articleId)}},{key:"renderList",value:function(){return this.state.comments.map(function(e){return r.a.createElement("div",{className:"comment",key:e.id},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"author"},e.name),r.a.createElement("div",{className:"text"},e.body)))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui comments"},r.a.createElement("h3",{className:"ui dividing header"},"Comments"),this.renderList(),r.a.createElement(P,{articleId:this.props.articleId}))}}]),t}(r.a.Component),L=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ui secondary segment"},r.a.createElement("h3",{className:"ui dividing header"},"SNS Share Buttons"),r.a.createElement("button",{class:"ui twitter button","data-tooltip":"\u3053\u306e\u8a18\u4e8b\u3092Twitter\u3067\u5171\u6709\u3059\u308b","data-inverted":"",onClick:function(t){window.open("https://twitter.com/share?url=https://thiele.work/articles/".concat(e.props.articleId),"_break")}},r.a.createElement("i",{class:"twitter icon"}),"Twitter"))}}]),t}(r.a.Component),I=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).buttonPressNext=function(e){if(a.props.posts.next){var t=a.props.posts.next.match(/\?page=(.*?)(&|$)/);a.props.fetchPosts(t[0]),window.scrollTo(0,0)}},a.checkNext=function(){if(!a.props.posts.next)return{opacity:.3,cursor:"default"}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPosts(),S.a.setOptions({highlight:function(e,t){return T.a.highlightAuto(e,[t]).value}})}},{key:"renderTagList",value:function(e){return e.map(function(e){return r.a.createElement("div",{className:"ui green label",key:e},e)})}},{key:"renderList",value:function(){var e=this;return void 0===this.props.posts.results?null:this.props.posts.results.map(function(t){return r.a.createElement("div",{className:"ui segment",key:t.id},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"description"},r.a.createElement("h1",{className:"ui dividing header"},t.title),e.renderTagList(t.tags),r.a.createElement("div",{className:"ui divider"}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:S()(t.body)}}),r.a.createElement(_,{articleId:t.id}),r.a.createElement(L,{articleId:t.id})))))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui relaxed divided list"},this.renderList(),r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"fluid ui olive labeled icon button",onClick:this.buttonPressNext,style:this.checkNext()},r.a.createElement("i",{className:"icon chevron circle right"})," Next Page")))}}]),t}(r.a.Component),F=Object(m.f)(Object(i.b)(function(e){return{posts:e.posts}},{fetchPosts:function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("/articles/".concat(e||""));case 2:n=t.sent,a({type:"FETCH_POSTS",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(I)),A=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPost(this.props.match.params.id),S.a.setOptions({highlight:function(e,t){return T.a.highlightAuto(e,[t]).value}})}},{key:"componentDidUpdate",value:function(){this.props.fetchPost(this.props.match.params.id)}},{key:"renderList",value:function(){var e=this.props.post;return r.a.createElement("div",{className:"ui segment",key:e.id},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"description"},r.a.createElement("h1",{className:"ui dividing header"},e.title),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:S()(e.body||"")}}),r.a.createElement(_,{articleId:e.id}),r.a.createElement(L,{articleId:e.id})))))}},{key:"render",value:function(){return"new"===this.props.match.params.id?null:r.a.createElement("div",{className:"ui relaxed divided list"},this.renderList())}}]),t}(r.a.Component),D=Object(m.f)(Object(i.b)(function(e){return{post:e.post}},{fetchPost:function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("/articles/".concat(e,"/"));case 2:n=t.sent,a({type:"FETCH_POST",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(A)),M=a(33),H=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={tagname:"",tags:[],selected:[]},a.onFormSubmit=function(e){var t=localStorage.getItem("access");N.post("/tags/",{tag:a.state.tagname},{headers:{Authorization:"JWT ".concat(t)}}),a.setState({tagname:""})},a.onSelected=function(e,t){a.state.selected.includes(e)?(a.setState({selected:a.state.selected.filter(function(t){return t!==e})}),a.props.onJsonTag(a.state.selected.filter(function(t){return t!==e}))):(a.setState({selected:[].concat(Object(M.a)(a.state.selected),[e])}),a.props.onJsonTag([].concat(Object(M.a)(a.state.selected),[e])))},a.getTags=Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/tags/");case 2:t=e.sent,a.setState({tags:t.data});case 4:case"end":return e.stop()}},e)})),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getTags()}},{key:"labelHelper",value:function(e){return this.state.selected.includes(e)?"ui green label":"ui label"}},{key:"renderList",value:function(){var e=this;return this.state.tags.map(function(t){return r.a.createElement("div",{className:e.labelHelper(t.tagname),onClick:e.onSelected.bind(null,t.tagname)},t.tagname)})}},{key:"tagCreatePart",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form",onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"New Tag"),r.a.createElement("input",{type:"text",value:this.state.tagname,onChange:function(t){return e.setState({tagname:t.target.value})}}))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui segment"},r.a.createElement("h3",{className:"header"},"Tags"),this.renderList(),r.a.createElement("div",{class:"ui divider"}),this.tagCreatePart())}}]),t}(r.a.Component),J=a(32),U=a.n(J),q=a(23),B=(a(82),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={func:function(){q.b.info("Login required to create an article")}},a.loginCheck=function(){var e=localStorage.getItem("access");e?Object(E.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.post("/auth/jwt/verify/",{token:e});case 2:200!==t.sent.status?a.setState({func:function(){q.b.warn("Your token has expired")}}):a.setState({func:function(){q.b.success("You are logged in")}});case 4:case"end":return t.stop()}},t)}))():a.setState({func:function(){q.b.error("You are not logged in")}})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=U.a.isEqual(e,this.props),n=U.a.isEqual(t,this.state);return!(a&&n)}},{key:"componentDidMount",value:function(){this.loginCheck()}},{key:"render",value:function(){return this.addNotification=this.state.func,r.a.createElement("div",null,this.addNotification(),r.a.createElement(q.a,null))}}]),t}(r.a.Component)),Y=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",markdown:"",selected_tags:[]},a.onJsonTag=function(e){a.setState({selected_tags:e.map(function(e){return e})})},a.onFormSubmit=function(e){var t=localStorage.getItem("access");N.post("/articles/",{title:a.state.title,body:a.state.markdown,tags:a.state.selected_tags},{headers:{Authorization:"JWT ".concat(t)}}),a.setState({title:"",markdown:""}),window.location.assign("../")},a.buttonPressSubmit=function(e){e.preventDefault(),a.onFormSubmit()},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){S.a.setOptions({highlight:function(e,t){return T.a.highlightAuto(e,[t]).value}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(B,null),r.a.createElement("div",{className:"ui two column stackable grid"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui form"},r.a.createElement("form",{className:"ui form",onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Body"),r.a.createElement("textarea",{value:this.state.markdown,onChange:function(t){return e.setState({markdown:t.target.value})}})),r.a.createElement("button",{className:"fluid ui button",onClick:this.buttonPressSubmit},"Submit")),r.a.createElement(H,{onJsonTag:this.onJsonTag})))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:S()(this.state.markdown)}})))))}}]),t}(r.a.Component),z=function(){return r.a.createElement("div",{className:"ui secondary pointing menu"},r.a.createElement(u.b,{to:"/",className:"active item"},"Thiele's blog"),r.a.createElement(u.b,{to:"/articles/new",className:"item"},"New Post"),r.a.createElement("div",{className:"right menu"},r.a.createElement(u.b,{to:"/titles",className:"item"},"Title List"),r.a.createElement(u.b,{to:"/login",className:"item"},"Login")))},W=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",password:""},a.onFormSubmit=function(){var e=Object(E.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth/jwt/create/",{username:a.state.id,password:a.state.password});case 2:n=e.sent,localStorage.setItem("access",n.data.access),a.setState({id:"",password:""}),window.location.assign("../");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.buttonPressSubmit=function(e){e.preventDefault(),a.onFormSubmit()},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui form"},r.a.createElement("form",{className:"ui form",onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"UserId"),r.a.createElement("input",{type:"text",value:this.state.userid,onChange:function(t){return e.setState({id:t.target.value})}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement("button",{className:"fluid ui button",onClick:this.buttonPressSubmit},"Submit"))))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(c)))).state={tag:"",tags:[]},a.setTags=Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/tags/");case 2:t=e.sent,a.setState({tags:t.data});case 4:case"end":return e.stop()}},e)})),a.buttonPressSearch=function(e){e!==a.state.tag?(a.setState({tag:e}),a.props.buttonPressSearch(e)):(a.setState({tag:""}),a.props.buttonPressSearch())},a.labelCheck=function(e){return e===a.state.tag?"ui green label":"ui label"},a.tagSearchList=function(){return a.state.tags.map(function(e){return r.a.createElement("div",{className:a.labelCheck(e.tagname),style:{cursor:"pointer"},key:e.tagname,onClick:a.buttonPressSearch.bind(null,e.tagname)},e.tagname)})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setTags()}},{key:"render",value:function(){return r.a.createElement("div",null,this.tagSearchList())}}]),t}(r.a.Component),$=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).buttonPressSearch=function(e,t){e?a.props.fetchTitles("?tag=".concat(e)):a.props.fetchTitles()},a.helperUrl=function(e){return"/articles/".concat(e)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTitles()}},{key:"renderList",value:function(){return this.props.titles.map(function(e){return r.a.createElement("div",{className:"item",key:e.id},r.a.createElement("i",{className:"large angle double right icon"}),r.a.createElement("div",{className:"content"},r.a.createElement(u.b,{to:"/articles/".concat(e.id),className:"header"},e.title),r.a.createElement("div",{className:"description"},e.created_at)))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui segment"},r.a.createElement("h1",{className:"header"},"\u30bf\u30b0\u7d5e\u308a\u8fbc\u307f\u691c\u7d22"),r.a.createElement(R,{buttonPressSearch:this.buttonPressSearch}),r.a.createElement("div",{className:"ui divider"}),r.a.createElement("div",{className:"ui relaxed divided list"},this.renderList()))}}]),t}(r.a.Component),G=Object(m.f)(Object(i.b)(function(e){return{titles:e.titles}},{fetchTitles:O})($)),K=function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement("div",{className:"ui stackable grid"},r.a.createElement("div",{className:"eleven wide column"},r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",exact:!0,component:F}),r.a.createElement(m.a,{path:"/titles",exact:!0,component:j}),r.a.createElement(m.a,{path:"/login",exact:!0,component:W}),r.a.createElement(m.a,{path:"/articles/new",exact:!0,component:Y}),r.a.createElement(m.a,{path:"/articles/:id",exact:!0,component:D}),r.a.createElement(m.a,{component:F}))),r.a.createElement("div",{className:"five wide column"},r.a.createElement(m.a,{path:"/",component:G}))))))},Q=Object(o.c)({post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POST":return t.payload;default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS":return t.payload;default:return e}},titles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TITLES":return t.payload;default:return e}}}),V=Object(o.d)(Q,Object(o.a)(l.a));s.a.render(r.a.createElement(i.a,{store:V},r.a.createElement(K,null)),document.querySelector("#root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.1466343b.chunk.js.map